(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var O=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],p=t=>{let e=0;for(let r=0;r<t.length;r++){let n=t[r],a=O.indexOf(n);e=e*83+a}return e},I=t=>{let e=t/255;return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},b=t=>{let e=Math.max(0,Math.min(1,t));return e<=.0031308?Math.trunc(e*12.92*255+.5):Math.trunc((1.055*Math.pow(e,.4166666666666667)-.055)*255+.5)},z=t=>t<0?-1:1,w=(t,e)=>z(t)*Math.pow(Math.abs(t),e),C=class extends Error{constructor(t){super(t),this.name="ValidationError",this.message=t}},N=t=>{if(!t||t.length<6)throw new C("The blurhash string must be at least 6 characters");let e=p(t[0]),r=Math.floor(e/9)+1,n=e%9+1;if(t.length!==4+2*n*r)throw new C(`blurhash length mismatch: length is ${t.length} but it should be ${4+2*n*r}`)},S=t=>{let e=t>>16,r=t>>8&255,n=t&255;return[I(e),I(r),I(n)]},T=(t,e)=>{let r=Math.floor(t/361),n=Math.floor(t/19)%19,a=t%19;return[w((r-9)/9,2)*e,w((n-9)/9,2)*e,w((a-9)/9,2)*e]},$=(t,e,r,n)=>{N(t),n=n|1;let a=p(t[0]),s=Math.floor(a/9)+1,o=a%9+1,u=(p(t[1])+1)/166,d=new Array(o*s);for(let i=0;i<d.length;i++)if(i===0){let c=p(t.substring(2,6));d[i]=S(c)}else{let c=p(t.substring(4+i*2,6+i*2));d[i]=T(c,u*n)}let l=e*4,h=new Uint8ClampedArray(l*r);for(let i=0;i<r;i++)for(let c=0;c<e;c++){let v=0,M=0,E=0;for(let g=0;g<s;g++)for(let m=0;m<o;m++){let f=Math.cos(Math.PI*c*m/e)*Math.cos(Math.PI*i*g/r),y=d[m+g*o];v+=y[0]*f,M+=y[1]*f,E+=y[2]*f}let P=b(v),x=b(M),L=b(E);h[4*c+0+i*l]=P,h[4*c+1+i*l]=x,h[4*c+2+i*l]=L,h[4*c+3+i*l]=255}return h},A=$;class B{constructor(){this.imageGrid=document.getElementById("imageGrid"),this.observerTarget=document.getElementById("observerTarget"),this.loading=!0,this.page=1,this.per_page=window.innerWidth>=1345?8:6,this.imageSize=null,this.apiKey=null,this.setupIntersectionObserver(),this.fetchImages()}showPrompt(){let e=prompt("Please enter your unsplash API KEY");e!=null&&(this.apiKey=e)}async fetchImages(){try{let r=await(await fetch(`gallery?per_page=${this.per_page}&page=${this.page}`)).json();if(r.errors)throw r.errors[0];this.renderImages(r)}catch(e){this.renderError(e),console.error("Error fetching images:",e),this.loading=!1}finally{this.loading=!1}}generatePrice(){return`$${(Math.random()*100+20).toFixed(2)}`}getImageSize(e){const{width:r,height:n}=e.getBoundingClientRect();return this.imageSize={width:parseInt(r),height:parseInt(n)},this.imageSize}getImageBlur(e,r,n){const a=document.createElement("canvas"),s=a.getContext("2d"),o=s.createImageData(r,n),u=A(e,r,n);return o.data.set(u),s.putImageData(o,0,0),a.toDataURL()}renderError(e){const r=document.createElement("p");r.className="error",r.innerHTML=e,document.body.appendChild(r)}renderImages(e){let r=0;e==null||e.forEach(n=>{const a=document.createElement("div");a.className="image-wraper",a.setAttribute("data-id",n.id);const s=document.createElement("div");s.className="image-container";const o=document.createElement("div");o.className="product-info";const u=document.createElement("h3");u.className="product-title",u.textContent=n.description||n.alt_description||"-";const d=document.createElement("div");d.className="product-price",d.textContent=this.generatePrice();const l=document.createElement("img");l.className="lazy-image",l.alt=n.alt_description||"Product",l.loading="lazy",o.appendChild(u),o.appendChild(d),a.appendChild(s),a.appendChild(o),this.imageGrid.appendChild(a);const h=this.imageSize?this.imageSize:this.getImageSize(s);s.style.backgroundImage=`url(${this.getImageBlur(n.blur_hash,h.width,h.height)})`,l.src=n.urls.regular,s.appendChild(l),window.setTimeout(()=>{a.classList.add("appear")},r),r+=200}),r=0}setupIntersectionObserver(){new IntersectionObserver(r=>{r[0].isIntersecting&&!this.loading&&(this.page++,this.fetchImages())},{rootMargin:"100px",threshold:.1}).observe(this.observerTarget)}}document.addEventListener("DOMContentLoaded",()=>{new B});
